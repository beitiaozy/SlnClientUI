<navbar parameter="{{ parameter }}" />
<view class="container">
	<block wx:if="{{ list.length > 0 }}">
		<scroll-view
				enable-back-to-top="{{true}}"
				class="scroll-view"
				bindscrolltolower="getList"
				scroll-y="{{true}}"
		>
			<view class="card-list">
				<block wx:for="{{ list }}" wx:key="index">
					<view class="card">
						<view class="card-header">
							<view class="shop-info">
								<text class="shop-icon">ğŸª</text>
								<text class="shop-name">{{ item.addr_name || 'æœªçŸ¥é—¨åº—' }}</text>
							</view>
							<text class="date">{{ item.create_time }}</text>
						</view>

						<view wx:if="{{item.type == 1}}">
							<view class="amount-section">
								<view class="amount-item">
									<text class="label">å……å€¼é‡‘é¢</text>
									<text class="value recharge">ï¿¥{{ item.money }}</text>
								</view>
								<view class="amount-item">
									<text class="label">èµ é€é‡‘é¢</text>
									<text class="value gift">+ï¿¥{{ item.awards }}</text>
								</view>
							</view>
						</view>
						<view wx:if="{{item.type != 1}}">
							<view class="amount-section">
								<view class="amount-item">
									<text class="label">å……å€¼é‡‘é¢</text>
									<text class="value recharge">ï¿¥{{ item.amount }}</text>
								</view>
								<view class="amount-item">
									<text class="label">è´­ä¹°æœåŠ¡</text>
									<text class="value gift">+ï¿¥{{ item.attr.description }}</text>
								</view>
							</view>
						</view>

						<view class="card-footer">
							<text class="order-no">è®¢å•å·: {{ item.pay_code || 'æš‚æ— ' }}</text>

							<view wx:if="{{item.type == 1}}">
								<text class="status 'completed'">{{item.attr.description}}</text>
							</view>
						</view>
					</view>
				</block>
			</view>

			<view class="load-more" wx:if="{{ hasMore }}">
				<text class="loading-text">åŠ è½½ä¸­...</text>
			</view>
			<view class="no-more" wx:if="{{ !hasMore && list.length > 5 }}">
				<text>æ²¡æœ‰æ›´å¤šè®°å½•äº†</text>
			</view>
		</scroll-view>
	</block>

	<block wx:else>
		<view class="empty">
			<image src="/images/empty-record.png" class="empty-icon" />
			<text class="empty-text">æš‚æ— å……å€¼è®°å½•</text>
			<text class="empty-subtext">å¿«å»è¿›è¡Œç¬¬ä¸€æ¬¡å……å€¼å§</text>
			<button class="recharge-btn" bindtap="goToRecharge">ç«‹å³å……å€¼</button>
		</view>
	</block>
</view>
<authorize bind:onLoadFun="onLoadFun"></authorize>