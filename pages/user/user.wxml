<navbar parameter="{{ parameter }}"></navbar>

<label for="mobile">
	<view class="user">
		<view style="padding: 30rpx;">
			<view style="display: flex; align-items: center; background: linear-gradient(135deg, #f9a825, #ff6f00); border-radius: 20rpx; padding: 30rpx; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">

				<!-- 头像 -->
				<view style="width: 100rpx; height: 100rpx; border-radius: 50%; overflow: hidden; margin-right: 30rpx;" bindtap="editUserInfo">
					<image src="{{ userInfo.avatarUrl || userInfo.avatar }}" style="width: 100%; height: 100%;" />
				</view>

				<!-- 用户信息 -->
				<view style="flex: 1; color: #fff;">
					<view style="display: flex; justify-content: space-between; align-items: center;">
						<view style="font-size: 32rpx; font-weight: bold;">
							{{ userInfo.nickName || userInfo.nickname || '未授权用户' }}
						</view>
						<button data-url="saoma" bindtap="goPages" class="btn-recharge">
							扫码充值
						</button>
					</view>
					<view style="font-size: 28rpx; margin: 8rpx 0;">
						手机号：{{ userInfo.mobile || '未绑定' }}
					</view>
					<view style="font-size: 28rpx;">
						余额：
						<text style="font-size: 34rpx; font-weight: bold;">{{ userInfo.money }} 元</text>
						<text style="font-size: 26rpx; color: #fff;">（含 {{ userInfo.ext_money || 0 }} 元赠送额度）</text>
					</view>
				</view>
			</view>
		</view>

		<!-- 下方功能模块保持不变 -->
		<view class="wrapper">
			<view style="margin: 30rpx; background: #fff; border-radius: 20rpx; padding: 20rpx 10rpx; box-shadow: 0 4px 8px rgba(0,0,0,0.05);">
				<view class="icon-grid">
					<view bindtap="goPages" data-url="/paginate/order_list/index">
						<image src="/images/dpj.png" style="width: 60rpx; height: 60rpx; margin-bottom: 10rpx;"></image>
						<text style="font-size: 26rpx; color: #333;">我的订单</text>
					</view>
					<view bindtap="goPages" data-url="/paginate/recharge_record/recharge_record">
						<image src="/images/dfk.png" style="width: 60rpx; height: 60rpx; margin-bottom: 10rpx;"></image>
						<text style="font-size: 26rpx; color: #333;">充值记录</text>
					</view>
					<view bindtap="goPages" data-url="/paginate/youhuiquan/youhuiquan">
						<text class="iconfont icon-youhuiquan" style="font-size: 60rpx; color: #f9a825; margin-bottom: 10rpx;"></text>
						<text style="font-size: 26rpx; color: #333;">优惠券</text>
					</view>
					<!-- 其他功能按钮保留 -->
					<view bindtap="goPages" data-url="/paginate/hehuoren/hehuoren" wx:if="{{ showSpecialButtons }}">
						<text class="iconfont icon-kefu" style="font-size: 60rpx; color: #f57c00; margin-bottom: 10rpx;"></text>
						<text style="font-size: 26rpx; color: #333;">后台</text>
					</view>
					<view bindtap="goPages" data-url="/paginate/upload_receipt/upload_receipt" wx:if="{{ showSpecialButtons }}">
						<text class="iconfont icon-daohang" style="font-size: 60rpx; color: #f57c00; margin-bottom: 10rpx;"></text>
						<text style="font-size: 26rpx; color: #333;">凭证上传</text>
					</view>
					<!-- 客服按钮 -->
					<label class="grid-item">
						<view class="iconfont icon-kehufuwukefu"
							  style="font-size: 60rpx; color: #1ab8e8;"></view>
						<button open-type="contact" plain="true" class="kefu-btn">联系客服</button>
					</label>
				</view>
			</view>
		</view>
	</view>
</label>
<authorize bind:onLoadFun="onLoadFun" isGoIndex="{{ isGoIndex }}" iShidden="{{ iShidden }}" isAuto="{{ isAuto }}"></authorize>
